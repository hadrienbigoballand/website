$(document).ready(function(){function e(){var e="ontouchstart"in window||0<navigator.maxTouchPoints,t=window.innerWidth<=768,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(navigator.userAgent),n=/Android|iOS/.test(navigator.platform)||/iPhone|iPad|iPod/.test(navigator.platform);return a||n||e&&t}var t=["#4a89dc","#ff6b6b","#26d0ce","#a0d468","#ffce54","#ac92ec","#ff9800","#e91e63","#00bcd4","#8bc34a","#ff5722","#9c27b0","#795548","#607d8b","#f44336","#3f51b5"];const o=[{title:"Shape seminar",date:new Date(2025,5,17),location:"Paris, France",multiDay:!1,description:"French research community on shapes analysis, from biomedical imaging to computer assisted design and graphics.",color:t[0]},{title:"Inverse Problems and Artificial Intelligence in Medicine",startDate:new Date(2025,5,23),endDate:new Date(2025,5,29),location:"Bath, England",multiDay:!0,description:"International conference on the intersection of inverse problems and AI in medical applications.",color:t[1]}];let s=(new Date).getMonth(),l=(new Date).getFullYear(),i=[];t=new Date;const r=t.getFullYear()-5;t=t.getFullYear()+5;const c=new Date(r,0,1),v=new Date(t,11,31);function a(){if(e())$(".calendar-grid").hide();else{i=[];const d=$(".calendar-days");d.empty();let e=0;for(var t=new Date(r,0,1);t<=v;){var a=function(t,a){var n=new Date(t,a,1).getDay(),n=0===n?6:n-1,d=new Date(t,a+1,0).getDate(),o=new Date(t,a,0).getDate(),i=[];for(let e=n-1;0<=e;e--){var r=o-e,s=$(`<div class="calendar-day other-month" data-day="${r}" data-month="${a-1}" data-year="${t}">${r}</div>`);i.push({element:s,day:r,month:a-1,year:t})}var l=new Date;for(let e=1;e<=d;e++){var c=$(`<div class="calendar-day" data-day="${e}" data-month="${a}" data-year="${t}">${e}</div>`),v=(t===l.getFullYear()&&a===l.getMonth()&&e===l.getDate()&&c.addClass("today"),p(t,a,e));0<v.length&&(c.addClass("has-event"),c.attr("data-events-count",v.length),c[0].style.setProperty("--primary-event-color",v[0].color),v=function(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(v[0].color))&&c[0].style.setProperty("--primary-event-color-rgb",`${v.r}, ${v.g}, `+v.b),i.push({element:c,day:e,month:a,year:t})}var n=i.length,y=7*Math.ceil(n/7)-n;for(let e=1;e<=y;e++){var h=a+1,m=11<h?t+1:t,h=11<h?0:h,u=$(`<div class="calendar-day other-month" data-day="${e}" data-month="${h}" data-year="${m}">${e}</div>`);i.push({element:u,day:e,month:h,year:m})}return{year:t,month:a,days:i}}(t.getFullYear(),t.getMonth()),n=(i.push(a),["January","February","March","April","May","June","July","August","September","October","November","December"]),n=$(`
        <div class="month-header-row">
          <div class="month-header-content">
            <span class="month-name">${n[t.getMonth()]}</span>
            <span class="month-year">${t.getFullYear()}</span>
          </div>
        </div>
      `),n=(d.append(n),$(`
        <div class="day-header">Mon</div>
        <div class="day-header">Tue</div>
        <div class="day-header">Wed</div>
        <div class="day-header">Thu</div>
        <div class="day-header">Fri</div>
        <div class="day-header">Sat</div>
        <div class="day-header">Sun</div>
      `));d.append(n),a.days.forEach(e=>{d.append(e.element)}),t<v&&d.append('<div class="month-separator-space"></div>'),e++,t.setMonth(t.getMonth()+1)}setTimeout(()=>{y()},100)}}function y(){var t,e,a=i.findIndex(e=>e.year===l&&e.month===s);-1!==a&&(t=a,i[t])&&(a=$(".calendar-body")[0],e=i[t].days.find(e=>e.month===i[t].month))&&(e=e.element[0].offsetTop-a.offsetTop,a.scrollTop=e)}function h(){$("#month-year").text(["January","February","March","April","May","June","July","August","September","October","November","December"][s]+" "+l)}function p(t,a,n){const d=new Date(t,a,n);return d<c||d>v?[]:o.filter(e=>e.multiDay?d>=e.startDate&&d<=e.endDate:e.date.getFullYear()===t&&e.date.getMonth()===a&&e.date.getDate()===n)}function n(e,t,a){var n=p(a,t,e);let d=`
      <div class="day-detail-modal">
        <div class="day-detail-header">
          <h3 class="day-detail-date">${new Date(a,t,e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</h3>
          <button class="day-detail-close">&times;</button>
        </div>
        <div class="day-detail-content">
    `;0===n.length?d+=`
        <div class="no-events-day">
          <div class="no-events-icon">ðŸ“…</div>
          <p>No events scheduled for this day</p>
        </div>
      `:(d+='<div class="day-events-list">',n.forEach(e=>{let t="";t=e.multiDay?e.startDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" - "+e.endDate.toLocaleDateString("en-US",{month:"short",day:"numeric"}):e.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),d+=`
          <div class="day-event-item" style="--event-color: ${e.color}">
            <div class="day-event-time">${t}</div>
            <div class="day-event-title">${e.title}</div>
            <div class="day-event-location">${e.location}</div>
            ${e.description?`<div class="day-event-description">${e.description}</div>`:""}
          </div>
        `}),d+="</div>"),d+=`
        </div>
      </div>
    `;{a=d,$(".day-detail-overlay").remove();const o=$(`
      <div class="day-detail-overlay">
        ${a}
      </div>
    `);$("body").append(o),requestAnimationFrame(()=>{o.addClass("visible")}),$(".day-detail-close, .day-detail-overlay").click(function(e){e.target===this&&m()}),$(".day-detail-modal").click(function(e){e.stopPropagation()}),$(document).on("keydown.dayModal",function(e){"Escape"===e.key&&m()})}}function m(){const e=$(".day-detail-overlay");e.removeClass("visible"),setTimeout(()=>{e.remove(),$(document).off("keydown.dayModal")},300)}$(".calendar-body").on("scroll",function(){var e=$(".calendar-body")[0],t=e.scrollTop,a=e.clientHeight,n=e.scrollHeight;{const d=$(".calendar-body")[0],o=d.scrollTop,i=d.clientHeight,r=o+i/2;let n=null;$(".calendar-day:not(.other-month)").each(function(){var e,t=this.offsetTop,a=t+this.offsetHeight;if(t<=r&&a>=r)return t=parseInt($(this).attr("data-month")),a=parseInt($(this).attr("data-year")),(e=new Date(a,t,1))>=c&&e<=v&&(n={month:t,year:a}),!1}),!n||n.month===s&&n.year===l||(s=n.month,l=n.year,h())}t<0?e.scrollTop=0:n<t+a&&(e.scrollTop=n-a)}),$(document).on("click",".calendar-day",function(){n(parseInt($(this).attr("data-day")),parseInt($(this).attr("data-month")),parseInt($(this).attr("data-year")))}),$(document).on("click","#today-button",function(){var e=new Date;s=e.getMonth(),l=e.getFullYear(),h(),y()}),e()?($(".calendar-container").addClass("mobile-events-only"),$(".calendar-grid").hide()):a(),h();{const d=$("#events-container"),u=(d.empty(),new Date);0===(t=o.filter(e=>e.multiDay?e.endDate>=u:e.date>=u).sort((e,t)=>{return(e.multiDay?e.startDate:e.date)-(t.multiDay?t.startDate:t.date)})).length?d.append('<div class="no-events">No upcoming events</div>'):t.forEach(e=>{let t;t=e.multiDay?e.startDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" - "+e.endDate.toLocaleDateString("en-US",{month:"short",day:"numeric"}):e.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});e=$(`
        <div class="event-item" style="--event-color: ${e.color}">
          <div class="event-date">${t}</div>
          <div class="event-title">${e.title}</div>
          <div class="event-location">${e.location}</div>
          ${e.description?`<div class="event-description">${e.description}</div>`:""}
        </div>
      `);d.append(e)})}});
